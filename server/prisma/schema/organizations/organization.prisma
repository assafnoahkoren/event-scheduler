// Organization - Top-level entity that contains multiple sites

model Organization {
  id          String   @id @default(uuid())
  name        String

  // Owner (always has full permissions)
  ownerId     String   @map("owner_id")
  owner       User     @relation("OwnedOrganizations", fields: [ownerId], references: [id])

  // Settings
  defaultCurrency String @default("USD") @map("default_currency")
  timezone        String @default("UTC")
  language        String @default("en") // en, ar, he
  dateFormat      String @default("dd/MM/yy") @map("date_format") // Date format string for date-fns

  // Billing/Plan info
  plan        String   @default("free") // free, pro, enterprise
  maxSites    Int      @default(3) @map("max_sites")
  maxUsers    Int      @default(10) @map("max_users")

  // Soft delete
  deletedAt   DateTime? @map("deleted_at")
  isDeleted   Boolean   @default(false) @map("is_deleted")

  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  // Relations
  sites              Site[]
  members            OrganizationMember[]
  clients            Client[]
  serviceProviders   ServiceProvider[]
  serviceCategories  ServiceCategory[]
  userActivities     UserActivity[]
  componentTypes     ComponentType[]

  @@index([ownerId])
  @@index([isDeleted])
  @@map("organizations")
}