// Site model for multi-tenant architecture

model Site {
  id          String   @id @default(uuid())
  name        String

  // Site settings
  isActive    Boolean  @default(true)

  // Organization relationship
  organizationId String       @map("organization_id")
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  // Ownership
  ownerId     String   @map("owner_id")
  owner       User     @relation("OwnedSites", fields: [ownerId], references: [id])

  // Soft delete
  deletedAt   DateTime? @map("deleted_at")
  isDeleted   Boolean   @default(false) @map("is_deleted")

  // Timestamps
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  // Relations
  siteUsers   SiteUser[]
  invitations SiteInvitation[]
  events      Event[]
  products    Product[]
  waitingListEntries WaitingListEntry[]
  // organizationPermissions OrganizationPermission[] // DEFERRED: Deep permissions for later

  @@index([ownerId])
  @@index([organizationId])
  @@index([isDeleted])
  @@index([organizationId, isDeleted])
  @@map("sites")
}